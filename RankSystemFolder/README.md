# 概要
設置するだけでランクのUIと機能を用意できるVerseコードです。

二つのフォルダが用意されており「RankSystem」はデータのセーブをVerseで完結させたものとなります。Verseの知識が多少必要となるので、よくわからなければRankSystemStatCreatorを選びましょう。

実際にプロジェクトで使用する場合、「RankSystem/RankSystemStatCreator」が入った「RankSystemFolder」をそのままプロジェクトに入れるのはやめましょう。今回であれば片方だけ使用するため、「RankSystemStatCreator」を使用したい場合はRankSystemStatCreatorのフォルダだけをプロジェクトに入れるようお願いします。

## 設定方法
コンテンツブラウザに生成される「rank_system_device」を設置することで島内でランクが有効になります。

### RankInfo
ランク分けの設定を行います。プラスボタンを押すことでランクの種類を増やすことができます。

- Icon: ランクに到達した際に表示されるアイコンとして使用される画像を設定します。
- Name: ランクに到達した際に表示される名前を設定します。
- Threshold: 設定中のランクに到達するために必要なポイント数を設定します。
- ReachedEvent: チャンネルの仕掛けを選択し、現在のランクに到達した際にイベントが発火されます。
- IsReached: スイッチの仕掛け（切り替える）を選択すると、ランクに到達しているからOn/Offの状態で確認できます。その際、スイッチ側の設定の「プレイヤーごとに状態を保存」を有効にしてある必要があります。
- AttachVFX: ランクに到達した際に装着されるVFXパワーアップを設定します。

注意点: どのランクにも達していない場合の表示用に「Threshold: 0」の要素を用意するのをオススメします。

### Desgin
ランクUIの表示位置/外見を設定します。

- Anchors: ランクUI全体の表示位置を調整します。
- Offsets: 1080px単位で細かい位置調整をする場合に使用します。
- Alignment: 文字や画像がUIに収まらなくなった場合、どのポイントを中心に引き延ばされるかを設定します。
- Background: 背景として使用される見た目を設定します。下矢印をクリックすると表示のモードを切り替えることができます。
- - Size(共通): 背景として使用されるブロックの大きさを調整します。単位は1920/1080です。
- - color_block: 単色のブロックを背景として使用します。Opacityを設定すると透明度も調整可能です。
- - texture_block: 画像を背景として使用します。
- ___Position(共通): Backgroundの中心からX(横方向), Y(縦方向)にどれだけずらした位置に表示するかの設定です。値はマイナスにも対応しています。
- Icon: RankInfo.Iconで設定した画像の表示設定を行います。
- - 注意点: デフォルトでは「rank_system_icon_color_block」が選択されている状態ですが、下矢印から「rank_system_icon_texture_block」に変更するのを推奨します。
- Name: RankInfo.Nameで設定した名前が表示されます。
- Progress: 「現在のポイント / 次の目標値」の形式で数値が表示されます。
- ProgressBar: 進行度を示すバーを表示するかの項目です。「Set To Value」を選択すると表示させるようにでき、バツマークを押すと表示させないようになります。
- - Padding: ゲージの外枠の大きさを設定します。0.0とすることで表示させないことも可能です。

### Score
スコアを付与する方法を設定します。

- Type.Add: Scoreで設定した値だけ現在のポイントに足します。
- Type.Subtract: Scoreで設定した値だけ現在のポイントから引きます。
- Type.Set: Scoreで設定した値にポイントを上書きします。
- Activate: チャンネルの仕掛けを設定し、「ユーザーオプション - 機能: 送信」を起動するとスコアが付与/はく奪されます。

### その他

- EnableDeviceConnect: チェックを外すことで「ReachedEvent」「IsReached」「AttachVFX」の機能を無効化できます。マップ内でこれらの機能を使っていないのであれば、軽量化のためにチェックを外すのをオススメします。
- EnableLimitless: チェックが入っていると、RankInfoの最後の要素に到達した後もポイントを獲得し続けることができます。

## RankSystemStatCreator
データの保存を「統計データクリエイター」で行う場合の設定方法です。
- ScoreStatCreator
- IndexStatCreator
これらには「最大値: 10000000」「統計データのゲージ値をHUDに表示: いいえ」「持続データを使用: チェック」「オートセーブ: チェック」「オートロード: チェック」の設定を行った統計データクリエイターを二つ用意してセットします。

## Verseデータ保存の注意点
Verseでのデータ保存を使用すると、不要な仕掛けを二つ減らせるメリットがあります。しかし、マップ公開後に保存で使用されているクラスやweak_mapを気軽に消したり移動させることができなくなるため、ここまでの説明がわからない知識量の方などはStatCreatorを使いましょう。

もしVerse Persistableを使用する場合は、「RankSystemSave.verse」ファイルを編集してマップに合ったクラス名/weak_mapを使用するように改造してください。